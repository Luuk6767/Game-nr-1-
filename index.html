<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>JS Racing Prototyp</title>
    <style>
        body { font-family: sans-serif; background: #222; color: white; text-align: center; }
        canvas { background: #444; border: 5px solid #555; display: none; margin: 20px auto; }
        .menu { max-width: 600px; margin: 50px auto; padding: 20px; background: #333; border-radius: 10px; }
        select, button { padding: 10px; margin: 10px; font-size: 16px; cursor: pointer; }
        .controls { color: #aaa; font-size: 0.9em; }
    </style>
</head>
<body>

    <div id="setup-menu" class="menu">
        <h1>üèéÔ∏è JS Racing</h1>
        
        <label>V√§lj Bana:</label><br>
        <select id="track-select">
            <option value="#555">Stadsbana (Gr√•)</option>
            <option value="#228B22">Skogsbana (Gr√∂n)</option>
            <option value="#D2B48C">√ñkenrally (Sand)</option>
        </select>
        
        <br><br>
        
        <label>V√§lj Fordon:</label><br>
        <select id="car-select">
            <option value="üî¥">Sportbil (R√∂d)</option>
            <option value="üîµ">Sedan (Bl√•)</option>
            <option value="üü¢">Lastbil (Gr√∂n)</option>
            <option value="üü°">Taxi (Gul)</option>
            <option value="üü£">F1-bil (Lila)</option>
            <option value="üü†">SUV (Orange)</option>
            <option value="‚ö™">Polisbil (Vit)</option>
            <option value="üü§">Veteranbil (Brun)</option>
            <option value="‚ö´">Gatubil (Svart)</option>
            <option value="üíñ">Custom (Rosa)</option>
        </select>
        
        <br><br>
        <button onclick="startGame()">STARTA RACET!</button>
        <p class="controls">Styr med pilv√§nster/h√∂ger och gasa/bromsa med upp/ned.</p>
    </div>

    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        
        let gameRunning = false;
        let car = { x: 400, y: 500, speed: 0, angle: 0, color: "üî¥" };
        let keys = {};

        function startGame() {
            // H√§mta valen fr√•n menyn
            const trackColor = document.getElementById("track-select").value;
            car.color = document.getElementById("car-select").value;
            
            // Uppdatera utseendet
            canvas.style.backgroundColor = trackColor;
            document.getElementById("setup-menu").style.display = "none";
            canvas.style.display = "block";
            
            gameRunning = true;
            update();
        }

        window.addEventListener("keydown", e => keys[e.code] = true);
        window.addEventListener("keyup", e => keys[e.code] = false);

        function update() {
            if (!gameRunning) return;

            // Fysik och kontroll
            if (keys["ArrowUp"]) car.speed += 0.2;
            if (keys["ArrowDown"]) car.speed -= 0.2;
            if (keys["ArrowLeft"]) car.angle -= 0.05;
            if (keys["ArrowRight"]) car.angle += 0.05;

            // Friktion
            car.speed *= 0.98;

            // Position
            car.x += Math.sin(car.angle) * car.speed;
            car.y -= Math.cos(car.angle) * car.speed;

            draw();
            requestAnimationFrame(update);
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Rita bilen (som emoji f√∂r enkelhetens skull)
            ctx.save();
            ctx.translate(car.x, car.y);
            ctx.rotate(car.angle);
            ctx.font = "40px Arial";
            ctx.textAlign = "center";
            ctx.fillText(car.color, 0, 15);
            ctx.restore();
        }
    </script>
</body>
</html>
